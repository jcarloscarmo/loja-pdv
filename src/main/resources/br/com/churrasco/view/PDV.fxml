<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="br.com.churrasco.controller.PDVController"
            fx:id="rootPane"
            prefHeight="700.0" prefWidth="1000.0">

    <!-- TOPO: Título, Botões e FAIXA DE ENCOMENDAS -->
    <top>
        <VBox>
            <!-- Barra Superior (Título e Botões) -->
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 15;">

                <Label text="CHURRASCARIA PDV" textFill="WHITE" maxWidth="Infinity" HBox.hgrow="ALWAYS">
                    <font><Font name="System Bold" size="24.0"/></font>
                </Label>

                <Label fx:id="lblNumeroVenda" text="VENDA Nº ..." textFill="#f1c40f">
                    <font><Font name="System Bold" size="20.0"/></font>
                </Label>

                <!-- Botão Nova Encomenda (Atalho *) -->
                <Button text="NOVA ENCOMENDA (*)" onAction="#abrirNovaEncomenda"
                        style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>

                <Button text="FECHAR CAIXA" onAction="#acaoFecharCaixa"
                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>

                <Button text="SAIR (ESC)" onAction="#tentarSair"
                        style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
            </HBox>

            <!-- Faixa de Encomendas Pendentes -->
            <ScrollPane fitToHeight="true" vbarPolicy="NEVER" hbarPolicy="AS_NEEDED"
                        style="-fx-background-color: #ecf0f1; -fx-padding: 5;" prefHeight="85">
                <content>
                    <HBox fx:id="boxEncomendas" spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #ecf0f1;"/>
                </content>
            </ScrollPane>
        </VBox>
    </top>

    <!-- CENTRO: Tabela de Itens (Ocupa tudo agora) -->
    <center>
        <TableView fx:id="tabelaItens" fixedCellSize="45.0"
                   style="-fx-font-size: 18px; -fx-base: #ecf0f1; -fx-selection-bar: #3498db;">
            <columns>
                <TableColumn fx:id="colNome" text="PRODUTO" style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="colQtd" text="QTD/PESO" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colPreco" text="UNIT (R$)" style="-fx-alignment: CENTER-RIGHT;"/>
                <TableColumn fx:id="colTotal" text="TOTAL (R$)" style="-fx-alignment: CENTER-RIGHT; -fx-font-weight: bold;"/>
            </columns>
            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
            <placeholder>
                <Label text="Caixa Livre" textFill="#bdc3c7"><font><Font size="24.0"/></font></Label>
            </placeholder>
        </TableView>
    </center>

    <!-- ESQUERDA: Entradas -->
    <left>
        <VBox spacing="15" style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-border-color: #bdc3c7; -fx-border-width: 0 1 0 0;" prefWidth="300">

            <Label text="1. CÓDIGO DO PRODUTO">
                <font><Font name="System Bold" size="12.0"/></font>
            </Label>
            <TextField fx:id="txtCodigo" promptText="Digite..." style="-fx-font-size: 20px; -fx-alignment: CENTER;"/>

            <!-- LABEL DE PRE-VISUALIZAÇÃO DO PRODUTO -->
            <Label fx:id="lblProdutoIdentificado" text="..." wrapText="true" textAlignment="CENTER"
                   style="-fx-text-fill: #2980b9; -fx-font-size: 18px; -fx-font-weight: bold; -fx-background-color: #d6eaf8; -fx-padding: 10; -fx-background-radius: 5;"
                   maxWidth="Infinity" alignment="CENTER"/>

            <Label text="2. PESO (KG) / QTD">
                <font><Font name="System Bold" size="12.0"/></font>
            </Label>
            <TextField fx:id="txtPeso" promptText="0,000" disable="true" style="-fx-font-size: 20px; -fx-alignment: CENTER;"/>

            <Region VBox.vgrow="ALWAYS"/>

            <Label text="TOTAL DA VENDA:">
                <font><Font name="System Bold" size="14.0"/></font>
            </Label>
            <Label fx:id="lblTotalVenda" text="R$ 0,00" textFill="#2980b9">
                <font><Font name="System Bold" size="36.0"/></font>
            </Label>

            <Button fx:id="btnFinalizar" text="FINALIZAR (/)" onAction="#finalizarVenda" maxWidth="Infinity" prefHeight="60"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
        </VBox>
    </left>

</BorderPane>